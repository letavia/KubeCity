# Default values for keyrock.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 2

image:
  repository: fiware/idm
  tag: latest
  pullPolicy: IfNotPresent

nameOverride: ""
fullnameOverride: keyrock-idm

service:
  type: LoadBalancer
  ports:
    idmNormal:
      name: idm-normal
      port: 3000
      targetPort: 3000
    idmSSL:
      name: idm-ssl
      port: 443
      targetPort: 443
    authTokenExt:
      name: auth-token-ext
      port: 8000
      targetPort: 8000
    authTokenInt:
      name: auth-token-int
      port: 5000
      targetPort: 5000
      
container:
  ports:
    http: 3000
    https: 443 

 https: {}
  enabled: #default false 
  cert_file: #default certs/idm-2018-cert.pem
  key_file: #default certs/idm-2018-key.pem
  ca_certs: []

database: 
  host: mysqlha-mysql-rs
  #mysqlRootPassword: keyrock
  idmUser: keyrock
  idmUserPassword: keyrock
  idmDBName: keyrock
  #idmDBPort: "3306" #default
  #dialect: #default mysql

portal:
  #idmHost: 'http://localhost:' + idmPort
  #idmPort: container_port 
  #idmHttpsEnabled: true
  #idmHttpsPort: 443
  idmAdminUser: dodol
  idmAdminEmail: dodol@dodol.com
  idmAdminPassword: dodol
  #idmPasswordEncryptionKey: #default nodejs_idm
  theme: {}
    title: #default Identity Manager
    theme: #default default
  session: {}
    secret: #default require('crypto').randomBytes(20).toString('hex')) 
    expires:  #default 60 * 60 * 1000 - 1 hour
  
email: {}
  configEmailListType: #default null -- should be whitelist or blacklist
  host: #default localhost
  port: #default 25
  from: #default noreply@localhost 
  
oauth2:
  authorizationCodeLifetime: #default 5 * 60 - Five minutes 
  accessTokenLifetime: #default 60 * 60 - One hour
  askAuthorization: #default true - Prompt a message to users to allow the application to read their details
  refreshTokenLifetime: #default 60 * 60 * 24 * 14 - Two weeks
  
api:
  tokenLifetime: #default 60 * 60 - One hour
  
pdp:
  level: basic|advanced 
  authzforce: 
    enabled: false
    host: localhost
    port: 8080
  
externalUser: {}
  enabled: #default false
  idPrefix: #default external
  passwordEncryption: #default sha1 - bcrypt or sha1
  passwordEncryptionKey: #default undefined
  database: {}
    host: #default localhost
    port: #default undefined
    database: #default db_name
    username: #default db_user
    password: #default db_pass
    user_table: #default user_view
    dialect: #default mysql

eidas: {}
  enabled: #default false
  gatewayHost: #default localhost 
  idpHost: #default 'https://se-eidas.redsara.es/EidasNode/ServiceProvider
  metadataExpiration: #default 60 * 60 * 24 * 365 - One year
  
ingress:
  enabled: false
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  path: /
  hosts:
    - chart-example.local
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #  cpu: 100m
  #  memory: 128Mi
  # requests:
  #  cpu: 100m
  #  memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}
